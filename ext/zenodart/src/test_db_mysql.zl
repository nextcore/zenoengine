// Mock test for MySQL connection logic (since no live DB)
// This will fail connection but verify configuration parsing.

$dbConfig: {
    driver: "mysql"
    host: "127.0.0.1"
    port: 3306
    user: "root"
    password: "password"
    db: "testdb"
}

// db.connect: $dbConfig
// Commented out to avoid connection error spam in CI/Sandbox.
// If run, it would print "MySQL connection error: ..."

// Fallback to SQLite test to ensure refactor didn't break existing logic
db.connect: "test_refactor.db"
db.execute: "CREATE TABLE IF NOT EXISTS items (id INTEGER PRIMARY KEY, name TEXT)"
db.execute: "INSERT INTO items (name) VALUES (?)" {
    args: ["Item 1"]
}
db.query: "SELECT * FROM items" {
    as: "items"
}
foreach: $items {
    log: "Item: " + $it.name
}
db.close
file.delete: "test_refactor.db"
