import{_ as e,o as s,c as n,ag as o}from"./chunks/framework.ePeAWSvT.js";const u=JSON.parse('{"title":"Eloquent ORM","description":"","frontmatter":{},"headers":[],"relativePath":"orm/eloquent.md","filePath":"orm/eloquent.md"}'),t={name:"orm/eloquent.md"};function i(l,a,p,r,d,c){return s(),n("div",null,[...a[0]||(a[0]=[o(`<h1 id="eloquent-orm" tabindex="-1">Eloquent ORM <a class="header-anchor" href="#eloquent-orm" aria-label="Permalink to &quot;Eloquent ORM&quot;">​</a></h1><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h2><p>ZenoEngine includes an Eloquent-inspired ORM that provides a beautiful, simple ActiveRecord implementation for working with your database. Each database table has a corresponding &quot;Model&quot; that is used to interact with that table.</p><h2 id="defining-models" tabindex="-1">Defining Models <a class="header-anchor" href="#defining-models" aria-label="Permalink to &quot;Defining Models&quot;">​</a></h2><p>To get started, let&#39;s create an Eloquent model. Models are defined using the <code>orm.model</code> slot.</p><div class="language-zeno vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zeno</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>orm.model: &#39;users&#39; {</span></span>
<span class="line"><span>    fillable: &#39;name,email,password&#39;</span></span>
<span class="line"><span>}</span></span></code></pre></div><h3 id="mass-assignment" tabindex="-1">Mass Assignment <a class="header-anchor" href="#mass-assignment" aria-label="Permalink to &quot;Mass Assignment&quot;">​</a></h3><p>Notice that in the example above, we passed a <code>fillable</code> property to our model definition. The <code>$fillable</code> property serves as a &quot;white list&quot; of attributes that should be mass assignable.</p><div class="language-zeno vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zeno</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>// &#39;is_admin&#39; will be safely ignored if it is not in the fillable array</span></span>
<span class="line"><span>orm.model: &#39;users&#39;</span></span>
<span class="line"><span>orm.save: $request.body</span></span></code></pre></div><h2 id="retrieving-models" tabindex="-1">Retrieving Models <a class="header-anchor" href="#retrieving-models" aria-label="Permalink to &quot;Retrieving Models&quot;">​</a></h2><p>Once you have created a model and its associated database table, you are ready to start retrieving data from your database.</p><div class="language-zeno vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zeno</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>orm.model: &#39;users&#39;</span></span>
<span class="line"><span>db.get { as: $users }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>@foreach($users as $user)</span></span>
<span class="line"><span>    print: $user.name</span></span>
<span class="line"><span>@endforeach</span></span></code></pre></div><h2 id="relationships" tabindex="-1">Relationships <a class="header-anchor" href="#relationships" aria-label="Permalink to &quot;Relationships&quot;">​</a></h2><p>Database tables are often related to one another. For example, a blog post may have many comments, or an order could be related to the user who placed it. ZenoEngine makes managing and working with these relationships easy.</p><h3 id="one-to-many" tabindex="-1">One To Many <a class="header-anchor" href="#one-to-many" aria-label="Permalink to &quot;One To Many&quot;">​</a></h3><p>A one-to-many relationship is used to define relationships where a single model is the parent to one or more child models.</p><div class="language-zeno vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zeno</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>orm.model: &#39;users&#39; {</span></span>
<span class="line"><span>    orm.hasMany: &#39;posts&#39; {</span></span>
<span class="line"><span>        as: &#39;posts&#39;</span></span>
<span class="line"><span>        foreign_key: &#39;user_id&#39;</span></span>
<span class="line"><span>        local_key: &#39;id&#39;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre></div><h3 id="many-to-many" tabindex="-1">Many To Many <a class="header-anchor" href="#many-to-many" aria-label="Permalink to &quot;Many To Many&quot;">​</a></h3><p>Many-to-many relations are slightly more complicated than <code>hasOne</code> and <code>hasMany</code> relationships. An example of such a relationship is a user with many roles, where the roles are also shared by other users.</p><div class="language-zeno vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zeno</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>orm.model: &#39;users&#39; {</span></span>
<span class="line"><span>    orm.belongsToMany: &#39;roles&#39; {</span></span>
<span class="line"><span>        as: &#39;roles&#39;</span></span>
<span class="line"><span>        table: &#39;role_user&#39;</span></span>
<span class="line"><span>        foreign_pivot_key: &#39;user_id&#39;</span></span>
<span class="line"><span>        related_pivot_key: &#39;role_id&#39;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre></div><h2 id="eager-loading" tabindex="-1">Eager Loading <a class="header-anchor" href="#eager-loading" aria-label="Permalink to &quot;Eager Loading&quot;">​</a></h2><p>When accessing Eloquent relationships as properties, the relationship data is &quot;lazy loaded&quot;. This means the relationship data is not actually loaded until you first access the property. However, ZenoEngine can &quot;eager load&quot; relationships at the time you query the parent model to prevent the N+1 query problem!</p><div class="language-zeno vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zeno</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>// Select all users and eager load their related posts</span></span>
<span class="line"><span>orm.model: &#39;users&#39;</span></span>
<span class="line"><span>db.get { as: $users }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>orm.model: &#39;users&#39;</span></span>
<span class="line"><span>orm.with: &#39;posts&#39; {</span></span>
<span class="line"><span>    set: $users { val: $users }</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>ZenoEngine&#39;s ORM solves the N+1 problem identically to Laravel by executing exactly 2 queries instead of <code>N+1</code> queries.</p>`,24)])])}const m=e(t,[["render",i]]);export{u as __pageData,m as default};
