import{_ as e,o as s,c as n,ag as t}from"./chunks/framework.ePeAWSvT.js";const u=JSON.parse('{"title":"Middleware","description":"","frontmatter":{},"headers":[],"relativePath":"basics/middleware.md","filePath":"basics/middleware.md"}'),i={name:"basics/middleware.md"};function l(d,a,p,o,r,c){return s(),n("div",null,[...a[0]||(a[0]=[t(`<h1 id="middleware" tabindex="-1">Middleware <a class="header-anchor" href="#middleware" aria-label="Permalink to &quot;Middleware&quot;">​</a></h1><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h2><p>Middleware provide a convenient mechanism for inspecting and filtering HTTP requests entering your application. All middleware are resolved out of the ZenoEngine service container.</p><h2 id="applying-middleware-to-routes" tabindex="-1">Applying Middleware to Routes <a class="header-anchor" href="#applying-middleware-to-routes" aria-label="Permalink to &quot;Applying Middleware to Routes&quot;">​</a></h2><p>You may assign middleware to individual routes using the <code>middleware</code> attribute:</p><div class="language-zeno vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zeno</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>http.get: &#39;/profile&#39; {</span></span>
<span class="line"><span>    middleware: &#39;auth&#39;</span></span>
<span class="line"><span>    do: {</span></span>
<span class="line"><span>        // Only authenticated users...</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre></div><h2 id="middleware-groups" tabindex="-1">Middleware Groups <a class="header-anchor" href="#middleware-groups" aria-label="Permalink to &quot;Middleware Groups&quot;">​</a></h2><p>Sometimes you may want to group several middleware together to make them easier to assign to routes. You can accomplish this using route groups:</p><div class="language-zeno vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zeno</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>http.group: &#39;/admin&#39; {</span></span>
<span class="line"><span>    middleware: &#39;auth&#39;</span></span>
<span class="line"><span>    do: {</span></span>
<span class="line"><span>        http.get: &#39;/dashboard&#39; { ... }</span></span>
<span class="line"><span>        http.get: &#39;/settings&#39; { ... }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre></div><h2 id="available-middleware" tabindex="-1">Available Middleware <a class="header-anchor" href="#available-middleware" aria-label="Permalink to &quot;Available Middleware&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Middleware</th><th>Description</th></tr></thead><tbody><tr><td><code>auth</code></td><td>Requires a valid JWT token. Injects <code>$auth</code> into scope.</td></tr></tbody></table><h3 id="accessing-auth-data" tabindex="-1">Accessing Auth Data <a class="header-anchor" href="#accessing-auth-data" aria-label="Permalink to &quot;Accessing Auth Data&quot;">​</a></h3><p>When the <code>auth</code> middleware is applied, authenticated user data is available via <code>$auth</code>:</p><div class="language-zeno vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zeno</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>http.get: &#39;/profile&#39; {</span></span>
<span class="line"><span>    middleware: &#39;auth&#39;</span></span>
<span class="line"><span>    do: {</span></span>
<span class="line"><span>        // $auth.id, $auth.email, $auth.role are available</span></span>
<span class="line"><span>        return: $auth.email</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre></div>`,14)])])}const m=e(i,[["render",l]]);export{u as __pageData,m as default};
