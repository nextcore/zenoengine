import{_ as s,o as t,c as n,ag as e}from"./chunks/framework.ePeAWSvT.js";const g=JSON.parse('{"title":"Database Migrations","description":"","frontmatter":{},"headers":[],"relativePath":"database/migrations.md","filePath":"database/migrations.md"}'),i={name:"database/migrations.md"};function o(l,a,p,r,d,c){return t(),n("div",null,[...a[0]||(a[0]=[e(`<h1 id="database-migrations" tabindex="-1">Database Migrations <a class="header-anchor" href="#database-migrations" aria-label="Permalink to &quot;Database Migrations&quot;">​</a></h1><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h2><p>Migrations are like version control for your database, allowing your team to define and share the application&#39;s database schema definition. ZenoEngine uses the <code>db.migrate</code> slot to manage schema changes.</p><h2 id="generating-migrations" tabindex="-1">Generating Migrations <a class="header-anchor" href="#generating-migrations" aria-label="Permalink to &quot;Generating Migrations&quot;">​</a></h2><p>Create a new migration file in <code>database/migrations/</code>:</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>database/</span></span>
<span class="line"><span>└── migrations/</span></span>
<span class="line"><span>    ├── 001_create_users_table.zl</span></span>
<span class="line"><span>    ├── 002_create_posts_table.zl</span></span>
<span class="line"><span>    └── 003_add_team_id_to_users.zl</span></span></code></pre></div><h2 id="migration-structure" tabindex="-1">Migration Structure <a class="header-anchor" href="#migration-structure" aria-label="Permalink to &quot;Migration Structure&quot;">​</a></h2><p>A basic migration to create a table:</p><div class="language-zeno vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zeno</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>// database/migrations/001_create_users_table.zl</span></span>
<span class="line"><span>db.migrate {</span></span>
<span class="line"><span>    create_table: &#39;users&#39; {</span></span>
<span class="line"><span>        id: &#39;bigint primary key autoincrement&#39;</span></span>
<span class="line"><span>        name: &#39;varchar(255) not null&#39;</span></span>
<span class="line"><span>        email: &#39;varchar(255) not null unique&#39;</span></span>
<span class="line"><span>        password: &#39;varchar(255) not null&#39;</span></span>
<span class="line"><span>        created_at: &#39;timestamp default current_timestamp&#39;</span></span>
<span class="line"><span>        updated_at: &#39;timestamp default current_timestamp&#39;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre></div><h2 id="running-migrations" tabindex="-1">Running Migrations <a class="header-anchor" href="#running-migrations" aria-label="Permalink to &quot;Running Migrations&quot;">​</a></h2><p>Run all pending migrations:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">zeno</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate</span></span></code></pre></div><p>Roll back the last batch:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">zeno</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate:rollback</span></span></code></pre></div><p>Reset all migrations:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">zeno</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate:reset</span></span></code></pre></div><h2 id="common-column-types" tabindex="-1">Common Column Types <a class="header-anchor" href="#common-column-types" aria-label="Permalink to &quot;Common Column Types&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>bigint primary key autoincrement</code></td><td>Auto-incrementing primary key</td></tr><tr><td><code>varchar(255)</code></td><td>String up to 255 characters</td></tr><tr><td><code>text</code></td><td>Long string / blob text</td></tr><tr><td><code>integer</code></td><td>Integer</td></tr><tr><td><code>boolean</code></td><td>True/false</td></tr><tr><td><code>timestamp</code></td><td>Date and time</td></tr><tr><td><code>decimal(8,2)</code></td><td>Decimal number (for prices)</td></tr></tbody></table><h2 id="adding-columns-to-existing-tables" tabindex="-1">Adding Columns to Existing Tables <a class="header-anchor" href="#adding-columns-to-existing-tables" aria-label="Permalink to &quot;Adding Columns to Existing Tables&quot;">​</a></h2><div class="language-zeno vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zeno</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>// database/migrations/003_add_team_id_to_users.zl</span></span>
<span class="line"><span>db.migrate {</span></span>
<span class="line"><span>    alter_table: &#39;users&#39; {</span></span>
<span class="line"><span>        add: &#39;team_id integer default null&#39;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre></div>`,20)])])}const u=s(i,[["render",o]]);export{g as __pageData,u as default};
