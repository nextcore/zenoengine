@extends('tutorial/max/layout')

@section('content')
<div class="container">
    <div class="dashboard-header">
        <h1>Dashboard</h1>
        <p>Welcome back, {{ $current_user.username }}!</p>
    </div>
    
    <div class="stats-grid">
        <div class="stat-card" hx-get="/tutorial/max/dashboard/stats/total" hx-trigger="every 2s" hx-swap="innerHTML" hx-target="#total_tasks">
            <div class="stat-icon">ğŸ“‹</div>
            <div class="stat-content">
                <h3 id="total_tasks">{{ $total_tasks }}</h3>
                <p>Total Tasks</p>
            </div>
        </div>
        
        <div class="stat-card stat-success" hx-get="/tutorial/max/dashboard/stats/completed" hx-trigger="every 2s" hx-swap="innerHTML" hx-target="#completed_tasks">
            <div class="stat-icon">âœ…</div>
            <div class="stat-content">
                <h3 id="completed_tasks">{{ $completed_tasks }}</h3>
                <p>Completed</p>
            </div>
        </div>
        
        <div class="stat-card stat-warning" hx-get="/tutorial/max/dashboard/stats/in_progress" hx-trigger="every 2s" hx-swap="innerHTML" hx-target="#in_progress_tasks">
            <div class="stat-icon">â³</div>
            <div class="stat-content">
                <h3 id="in_progress_tasks">{{ $in_progress_tasks }}</h3>
                <p>In Progress</p>
            </div>
        </div>
        
        <div class="stat-card stat-info" hx-get="/tutorial/max/dashboard/stats/pending" hx-trigger="every 2s" hx-swap="innerHTML" hx-target="#pending_tasks">
            <div class="stat-icon">â¸ï¸</div>
            <div class="stat-content">
                <h3 id="pending_tasks">{{ $pending_tasks }}</h3>
                <p>Pending</p>
            </div>
        </div>
        
        <div class="stat-card" hx-get="/tutorial/max/dashboard/stats/teams" hx-trigger="every 2s" hx-swap="innerHTML" hx-target="#total_teams">
            <div class="stat-icon">ğŸ‘¥</div>
            <div class="stat-content">
                <h3 id="total_teams">{{ $total_teams }}</h3>
                <p>Teams</p>
            </div>
        </div>
        
        <div class="stat-card" hx-get="/tutorial/max/dashboard/stats/users" hx-trigger="every 2s" hx-swap="innerHTML" hx-target="#total_users">
            <div class="stat-icon">ğŸ‘¤</div>
            <div class="stat-content">
                <h3 id="total_users">{{ $total_users }}</h3>
                <p>Users</p>
            </div>
        </div>
    </div>
    
    <div class="dashboard-content">
        <div class="dashboard-section">
            <h2>My Tasks</h2>
            @if($my_tasks_count > 0)
                @foreach($my_tasks as $task)
                    <div class="task-item priority-{{ $task.priority }}">
                        <div class="task-header">
                            <h4>{{ $task.title }}</h4>
                            <span class="badge badge-{{ $task.status }}">{{ $task.status }}</span>
                        </div>
                        <p>{{ $task.description }}</p>
                        @if($task.due_date)
                            <small>Due: {{ $task.due_date }}</small>
                        @endif
                    </div>
                @endforeach
            @else
                <p class="empty-state">No tasks assigned to you</p>
            @endif
        </div>
        
        <div class="dashboard-section">
            <h2>Recent Activity</h2>
            @if($recent_tasks_count > 0)
                @foreach($recent_tasks as $task)
                    <div class="activity-item">
                        <div class="activity-icon">ğŸ“</div>
                        <div class="activity-content">
                            <p><strong>{{ $task.title }}</strong></p>
                            <small>{{ $task.status }} - {{ $task.created_at }}</small>
                        </div>
                    </div>
                @endforeach
            @else
                <p class="empty-state">No recent activity</p>
            @endif
        </div>
    </div>
</div>
@endsection
